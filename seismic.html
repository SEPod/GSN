<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Seismic Design Helper – ASCE 7 Ch.12 (Educational)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f7;
      color: #222;
    }
    header {
      background: #1f3a93;
      color: #fff;
      padding: 1rem 1.5rem;
    }
    header h1 {
      margin: 0;
      font-size: 1.4rem;
    }
    header p {
      margin: 0.3rem 0 0;
      font-size: 0.9rem;
      opacity: 0.9;
    }
    main {
      max-width: 1100px;
      margin: 1.5rem auto 2rem;
      padding: 0 1rem;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1rem;
    }
    .card {
      background: #fff;
      border-radius: 0.5rem;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      padding: 1rem 1.25rem 1.25rem;
    }
    .card h2 {
      margin-top: 0;
      font-size: 1.1rem;
      border-bottom: 1px solid #e3e3ea;
      padding-bottom: 0.4rem;
    }
    .field {
      margin-bottom: 0.55rem;
    }
    .field label {
      display: block;
      font-size: 0.88rem;
      margin-bottom: 0.15rem;
    }
    .field input,
    .field select,
    .field textarea {
      width: 100%;
      box-sizing: border-box;
      padding: 0.35rem 0.4rem;
      border-radius: 0.3rem;
      border: 1px solid #cfd2e3;
      font-size: 0.9rem;
    }
    .field small {
      display: block;
      font-size: 0.75rem;
      color: #666;
      margin-top: 0.1rem;
    }
    .inline {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
    }
    button {
      padding: 0.45rem 0.9rem;
      border-radius: 0.35rem;
      border: none;
      background: #1f3a93;
      color: #fff;
      font-size: 0.95rem;
      cursor: pointer;
      margin-right: 0.4rem;
    }
    button.secondary {
      background: #555;
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
    }
    #results {
      font-size: 0.9rem;
      line-height: 1.4;
    }
    #results h3 {
      margin-top: 0;
      font-size: 1rem;
      border-bottom: 1px solid #e3e3ea;
      padding-bottom: 0.3rem;
    }
    #seismicNotes {
      min-height: 9rem;
      font-family: "Consolas", "SF Mono", Menlo, monospace;
      white-space: pre-wrap;
    }
    .disclaimer {
      font-size: 0.75rem;
      color: #555;
      margin-top: 0.8rem;
      line-height: 1.35;
    }
    .chip {
      display: inline-block;
      background: #eef1fb;
      color: #1f3a93;
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      font-size: 0.78rem;
      margin-right: 0.25rem;
      margin-bottom: 0.25rem;
    }
    @media (max-width: 700px) {
      header h1 {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>Seismic Design Helper (ASCE 7 Ch.12 – Educational)</h1>
  <p>Pick a seismic force-resisting system, compute Cs and base shear, and generate a seismic
     general-notes snippet. Final values must be checked against the current ASCE 7 and building code.</p>
</header>

<main>
  <div class="grid">
    <!-- PROJECT INFO -->
    <section class="card">
      <h2>1. Project &amp; Code Info</h2>

      <div class="field">
        <label for="projectName">Project name</label>
        <input id="projectName" type="text" placeholder="Example: Tomlinson House" />
      </div>

      <div class="field inline">
        <div>
          <label for="projectNumber">Project number</label>
          <input id="projectNumber" type="text" placeholder="e.g., P22912" />
        </div>
        <div>
          <label for="projectDate">Design date</label>
          <input id="projectDate" type="text" placeholder="e.g., 2025-11-19" />
        </div>
      </div>

      <div class="field">
        <label for="projectLocation">Location / Jurisdiction</label>
        <input id="projectLocation" type="text" placeholder="City, State, Jurisdiction" />
      </div>

      <div class="field inline">
        <div>
          <label for="seismicCode">Seismic code basis</label>
          <select id="seismicCode">
            <option value="ASCE 7-16" selected>ASCE 7-16</option>
            <option value="ASCE 7-22">ASCE 7-22</option>
            <option value="ASCE 7-10">ASCE 7-10</option>
            <option value="Other / local amendment">Other / local amendment</option>
          </select>
        </div>
        <div>
          <label for="riskCategory">Risk category</label>
          <select id="riskCategory">
            <option value="II" selected>II</option>
            <option value="I">I</option>
            <option value="III">III</option>
            <option value="IV">IV</option>
          </select>
        </div>
      </div>

      <div class="field inline">
        <div>
          <label for="importanceFactorIe">Importance factor, I<sub>e</sub></label>
          <input id="importanceFactorIe" type="number" step="0.01" value="1.0" />
          <small>Typical: 1.0 (RC I–II), 1.25 (RC III), 1.5 (RC IV).</small>
        </div>
        <div>
          <label for="siteClass">Seismic site class</label>
          <select id="siteClass">
            <option value="">(select)</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="C">C</option>
            <option value="D" selected>D</option>
            <option value="E">E</option>
            <option value="F">F</option>
          </select>
        </div>
      </div>
    </section>

    <!-- HAZARD & SYSTEM -->
    <section class="card">
      <h2>2. Hazard &amp; System Parameters</h2>

      <div class="field inline">
        <div>
          <label for="SDS">S<sub>DS</sub> (g)</label>
          <input id="SDS" type="number" step="0.01" placeholder="e.g., 1.05" />
        </div>
        <div>
          <label for="SD1">S<sub>D1</sub> (g)</label>
          <input id="SD1" type="number" step="0.01" placeholder="e.g., 0.55" />
        </div>
      </div>

      <div class="field">
        <label for="S1">S<sub>1</sub> (g, for Eq. 12.8-6 check; optional)</label>
        <input id="S1" type="number" step="0.01" placeholder="Enter S1 or leave blank" />
      </div>

      <div class="field">
        <label for="systemSelect">Seismic force-resisting system (from ASCE 7 Table 12.2-1)</label>
        <select id="systemSelect">
          <option value="">(manual entry / other system)</option>
          <optgroup label="Steel frames">
            <option value="steel-smf">Steel special moment frames (SMF)</option>
            <option value="steel-imf">Steel intermediate moment frames (IMF)</option>
            <option value="steel-omf">Steel ordinary moment frames (OMF)</option>
            <option value="steel-scbf">Steel special concentrically braced frames</option>
            <option value="steel-ocbf">Steel ordinary concentrically braced frames</option>
            <option value="steel-ebf">Steel eccentrically braced frames</option>
          </optgroup>
          <optgroup label="Concrete systems">
            <option value="conc-smf">Special reinforced concrete moment frames</option>
            <option value="conc-omf">Ordinary reinforced concrete moment frames</option>
            <option value="conc-sw-special">Special reinforced concrete shear walls</option>
            <option value="conc-sw-ordinary">Ordinary reinforced concrete shear walls</option>
          </optgroup>
          <optgroup label="Wood light-frame">
            <option value="wood-wsp">Light-framed walls sheathed with wood structural panels</option>
          </optgroup>
          <optgroup label="Masonry">
            <option value="rm-special">Special reinforced masonry shear walls</option>
            <option value="rm-ordinary">Ordinary reinforced masonry shear walls</option>
          </optgroup>
          <!-- You can extend this with more systems as needed -->
        </select>
        <small>Only a subset of common systems is listed. Always verify R, C<sub>d</sub>, and Ω<sub>0</sub> against the current ASCE 7 table.</small>
      </div>

      <div class="field">
        <label for="systemName">System description (will appear in report)</label>
        <input id="systemName" type="text" placeholder="e.g., Steel special moment frames" />
      </div>

      <div class="field inline">
        <div>
          <label for="R">R (response modification factor)</label>
          <input id="R" type="number" step="0.1" placeholder="e.g., 8.0" />
        </div>
        <div>
          <label for="Cd">C<sub>d</sub> (deflection amplification)</label>
          <input id="Cd" type="number" step="0.1" placeholder="e.g., 5.5" />
        </div>
      </div>

      <div class="field inline">
        <div>
          <label for="Omega0">Ω<sub>0</sub> (overstrength factor)</label>
          <input id="Omega0" type="number" step="0.1" placeholder="e.g., 3.0" />
        </div>
        <div>
          <label for="T">Fundamental period, T (s)</label>
          <input id="T" type="number" step="0.01" placeholder="e.g., 0.8" />
          <small>For this simplified helper, T is used only for reporting and drift checks.</small>
        </div>
      </div>

      <div class="field">
        <label for="W">Effective seismic weight, W (kips or kN – be consistent)</label>
        <input id="W" type="number" step="0.1" placeholder="e.g., 2500" />
      </div>

      <div class="field">
        <button id="calcBtn" type="button">Calculate Cs &amp; Base Shear + Generate Notes</button>
        <button id="copyNotesBtn" type="button" class="secondary" disabled>Copy Notes to Clipboard</button>
      </div>

      <p class="disclaimer">
        This helper uses the standard Cs = S<sub>DS</sub> / (R / I<sub>e</sub>) expression with minimum checks
        from ASCE 7 Sec. 12.8. Long-period limits, irregularities, torsion, redundancy, and other provisions
        are not automated. Use only as a learning / pre-check tool; the engineer of record must verify all
        criteria, system selection, and code compliance.
      </p>
    </section>
  </div>

  <!-- RESULTS & NOTES -->
  <section class="card" style="margin-top:1rem;">
    <h2>3. Seismic Results &amp; General-Notes Snippet</h2>
    <div id="results"></div>
    <div class="field" style="margin-top:0.75rem;">
      <label for="seismicNotes">Seismic design criteria – text block for general notes</label>
      <textarea id="seismicNotes" readonly></textarea>
      <small>
        This block is formatted so you can paste directly into your Structural General Notes and then edit
        for the specific project.
      </small>
    </div>
  </section>

  <section class="card" style="margin-top:0.5rem;">
    <h2>4. Limitations &amp; Responsibilities</h2>
    <p class="disclaimer">
      This page is provided for educational use only and is not a substitute for a full seismic design in
      accordance with the governing building code, ASCE 7, material standards, and local amendments.
      Values and formulas may be simplified. The Structural Engineering Podcast / tool author does not
      take responsibility for omissions, misapplication, or any use of the results. The engineer of record
      is solely responsible for verifying all design inputs, outputs, and notes before issuing drawings or
      calculations.
    </p>
  </section>
</main>

<script>
  // Small library of common SFRS options (R, Cd, Omega0).
  // Values are typical from ASCE 7-type tables; ALWAYS verify in the current standard.
  const systemData = {
    "steel-smf":        { label: "Steel special moment frames (SMF)",                     R: 8.0,  Cd: 5.5, Omega0: 3.0 },
    "steel-imf":        { label: "Steel intermediate moment frames (IMF)",               R: 4.5, Cd: 4.0, Omega0: 3.0 },
    "steel-omf":        { label: "Steel ordinary moment frames (OMF)",                   R: 3.5, Cd: 3.0, Omega0: 3.0 },
    "steel-scbf":       { label: "Steel special concentrically braced frames",           R: 6.0, Cd: 5.0, Omega0: 2.5 },
    "steel-ocbf":       { label: "Steel ordinary concentrically braced frames",          R: 3.25, Cd: 2.5, Omega0: 2.0 },
    "steel-ebf":        { label: "Steel eccentrically braced frames",                    R: 8.0, Cd: 5.0, Omega0: 2.0 },

    "conc-smf":         { label: "Special reinforced concrete moment frames",            R: 8.0, Cd: 5.5, Omega0: 3.0 },
    "conc-omf":         { label: "Ordinary reinforced concrete moment frames",           R: 3.0, Cd: 2.5, Omega0: 2.5 },
    "conc-sw-special":  { label: "Special reinforced concrete shear walls",              R: 6.5, Cd: 5.0, Omega0: 2.5 },
    "conc-sw-ordinary": { label: "Ordinary reinforced concrete shear walls",             R: 4.0, Cd: 3.5, Omega0: 2.0 },

    "wood-wsp":         { label: "Light-framed walls sheathed with wood structural panels", R: 6.5, Cd: 4.0, Omega0: 3.0 },

    "rm-special":       { label: "Special reinforced masonry shear walls",               R: 5.0, Cd: 3.5, Omega0: 2.5 },
    "rm-ordinary":      { label: "Ordinary reinforced masonry shear walls",              R: 3.0, Cd: 3.0, Omega0: 2.5 }
  };

  const systemSelectEl = document.getElementById("systemSelect");
  const systemNameEl   = document.getElementById("systemName");
  const REl            = document.getElementById("R");
  const CdEl           = document.getElementById("Cd");
  const OmegaEl        = document.getElementById("Omega0");

  systemSelectEl.addEventListener("change", () => {
    const key = systemSelectEl.value;
    if (!key || !systemData[key]) return;
    const sys = systemData[key];
    systemNameEl.value = sys.label;
    REl.value          = sys.R;
    CdEl.value         = sys.Cd;
    OmegaEl.value      = sys.Omega0;
  });

  function numOrNull(id) {
    const v = document.getElementById(id).value.trim();
    if (v === "") return null;
    const n = parseFloat(v);
    return isNaN(n) ? null : n;
  }

  function text(id) {
    return document.getElementById(id).value.trim();
  }

  function formatMaybe(num, suffix) {
    if (num === null || typeof num !== "number" || isNaN(num)) return "____" + (suffix || "");
    return num.toFixed(3) + (suffix || "");
  }

  document.getElementById("calcBtn").addEventListener("click", () => {
    const SDS  = numOrNull("SDS");
    const SD1  = numOrNull("SD1");
    const S1   = numOrNull("S1");
    const R    = numOrNull("R");
    const Ie   = numOrNull("importanceFactorIe");
    const T    = numOrNull("T");
    const W    = numOrNull("W");

    const resultsDiv = document.getElementById("results");
    const notesEl    = document.getElementById("seismicNotes");
    const copyBtn    = document.getElementById("copyNotesBtn");

    // Basic validation on the core items.
    if (SDS === null || R === null || Ie === null || W === null) {
      resultsDiv.innerHTML = "<p>Please enter at least S<sub>DS</sub>, R, I<sub>e</sub>, and W.</p>";
      notesEl.value = "";
      copyBtn.disabled = true;
      return;
    }

    // Basic Cs from Eq. 12.8-2
    const Cs_basic = SDS / (R / Ie);

    // Minimum Cs per Eq. 12.8-5
    const Cs_min1 = 0.044 * SDS * Ie;

    // Additional minimum per Eq. 12.8-6 when S1 >= 0.6g
    let Cs_min2 = null;
    if (S1 !== null && S1 >= 0.6) {
      Cs_min2 = 0.5 * S1 / (R / Ie);
    }

    let Cs_governing = Cs_basic;
    const notes = [];

    notes.push(`Eq. 12.8-2: Cs = SDS / (R / Ie) = ${Cs_basic.toFixed(4)}`);

    if (Cs_governing < Cs_min1) {
      Cs_governing = Cs_min1;
      notes.push(`Eq. 12.8-5 controls: Cs ≥ 0.044 * SDS * Ie = ${Cs_min1.toFixed(4)}`);
    } else {
      notes.push(`Eq. 12.8-5: 0.044 * SDS * Ie = ${Cs_min1.toFixed(4)}`);
    }

    if (Cs_min2 !== null) {
      if (Cs_governing < Cs_min2) {
        Cs_governing = Cs_min2;
        notes.push(`Eq. 12.8-6 controls (S1 ≥ 0.6 g): Cs ≥ 0.5 * S1 / (R / Ie) = ${Cs_min2.toFixed(4)}`);
      } else {
        notes.push(`Eq. 12.8-6 check: 0.5 * S1 / (R / Ie) = ${Cs_min2.toFixed(4)}`);
      }
    } else {
      notes.push("Eq. 12.8-6 not checked (S1 not provided or &lt; 0.6 g).");
    }

    const V = Cs_governing * W; // base shear (same units as W)

    // Build results HTML
    const sysName = text("systemName") || "(user-defined system)";
    const code    = text("seismicCode") || "ASCE 7";
    const rc      = text("riskCategory") || "";
    const site    = text("siteClass") || "";
    const Sd1Str  = SD1 === null ? "not entered" : SD1.toFixed(3) + " g";
    const Tstr    = T === null ? "not entered" : T.toFixed(3) + " s";

    resultsDiv.innerHTML = `
      <h3>Summary</h3>
      <p>
        <span class="chip">${code}</span>
        <span class="chip">Risk Category ${rc || "?"}</span>
        ${site ? `<span class="chip">Site Class ${site}</span>` : ""}
        ${sysName ? `<span class="chip">${sysName}</span>` : ""}
      </p>
      <p><strong>Inputs</strong></p>
      <ul>
        <li>S<sub>DS</sub> = ${SDS.toFixed(3)} g</li>
        <li>S<sub>D1</sub> = ${Sd1Str}</li>
        <li>R = ${R.toFixed(2)}, C<sub>d</sub> = ${CdEl.value || "____"}, Ω<sub>0</sub> = ${OmegaEl.value || "____"}</li>
        <li>I<sub>e</sub> = ${Ie.toFixed(2)}, Site Class = ${site || "____"}</li>
        <li>Fundamental period T = ${Tstr}</li>
        <li>Seismic weight W = ${W.toFixed(1)} (same units as base shear)</li>
      </ul>
      <p><strong>Cs checks</strong></p>
      <ul>
        <li>Eq. 12.8-2: Cs = ${Cs_basic.toFixed(4)}</li>
        <li>Eq. 12.8-5 minimum: ${Cs_min1.toFixed(4)}</li>
        <li>Eq. 12.8-6 minimum: ${Cs_min2 !== null ? Cs_min2.toFixed(4) : "not checked"}</li>
        <li><strong>Governing Cs used for V = ${Cs_governing.toFixed(4)}</strong></li>
      </ul>
      <p><strong>Design base shear (educational)</strong></p>
      <ul>
        <li>V = Cs · W = ${Cs_governing.toFixed(4)} × ${W.toFixed(1)} = <strong>${V.toFixed(1)}</strong> (units consistent with W)</li>
      </ul>
      <p><em>Note: This tool does not cover irregularities, vertical distribution of forces, accidental torsion,
         redundancy factor ρ, drift limits, or diaphragm/collector design. The engineer of record must
         check all applicable ASCE 7 provisions.</em></p>
      <p><strong>Computation notes</strong></p>
      <ul>${notes.map(n => `<li>${n}</li>`).join("")}</ul>
    `;

    // Build general-notes text block
    const notesBlock = [
      "SEISMIC DESIGN CRITERIA",
      "-----------------------",
      `Code Basis: ${code}`,
      `Risk Category: ${rc || "____"}`,
      `Seismic Importance Factor, I_e: ${Ie.toFixed(2)}`,
      `Seismic Site Class: ${site || "____"}`,
      "",
      `Mapped / Design Spectral Accelerations (by others, per ASCE 7 Ch. 11):`,
      `  S_DS = ${formatMaybe(SDS, " g")}`,
      `  S_D1 = ${formatMaybe(SD1, " g")}`,
      S1 !== null ? `  S_1 = ${S1.toFixed(3)} g` : "  S_1 = ____ g",
      "",
      `Seismic Force-Resisting System (SFRS):`,
      `  ${sysName}`,
      `  R = ${R.toFixed(2)}, C_d = ${CdEl.value || "____"}, Ω_0 = ${OmegaEl.value || "____"}`,
      "",
      `Analysis Procedure: Equivalent Lateral Force Procedure (ASCE 7 Ch. 12)`,
      `Approximate Fundamental Period, T: ${Tstr}`,
      `Effective Seismic Weight, W: ${W.toFixed(1)} (units consistent with analysis)`,
      "",
      `Design Seismic Response Coefficient, C_s (governing): ${Cs_governing.toFixed(4)}`,
      `Resulting Design Base Shear, V = C_s · W = ${V.toFixed(1)} (same units as W)`,
      "",
      "Notes:",
      "  1. Values above are generated by an educational helper and must be verified by the",
      "     Engineer of Record against the current ASCE 7, the governing building code, and",
      "     project-specific geotechnical / hazard information.",
      "  2. Height limits, system limitations, redundancy, irregularities, torsion, drift,",
      "     diaphragm / collector design, P-Δ effects, and detailing requirements are not",
      "     checked by this tool and shall be verified in separate calculations.",
      ""
    ].join("\n");

    notesEl.value = notesBlock;
    copyBtn.disabled = false;
  });

  document.getElementById("copyNotesBtn").addEventListener("click", () => {
    const text = document.getElementById("seismicNotes").value;
    if (!text) return;
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text).then(() => {
        alert("Seismic notes copied to clipboard.");
      }).catch(() => {
        alert("Could not access clipboard; please copy manually.");
      });
    } else {
      alert("Clipboard API not available; please select and copy manually.");
    }
  });
</script>
</body>
</html>
